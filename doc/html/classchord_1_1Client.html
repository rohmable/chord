<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chord: chord::Client Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chord
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacechord.html">chord</a></li><li class="navelem"><a class="el" href="classchord_1_1Client.html">Client</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">chord::Client Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="client_8hpp_source.html">client.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7a5838fc7db90ca550069d577819ced6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a7a5838fc7db90ca550069d577819ced6">Client</a> (const std::string &amp;conn_string)</td></tr>
<tr class="separator:a7a5838fc7db90ca550069d577819ced6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cf2551c3e211094d5516b00ff267751"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a6cf2551c3e211094d5516b00ff267751">Client</a> (const <a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> &amp;node)</td></tr>
<tr class="separator:a6cf2551c3e211094d5516b00ff267751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b8b938b6bd16edd21d6dc420812f3d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a9b8b938b6bd16edd21d6dc420812f3d8">connectTo</a> (const <a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> &amp;node)</td></tr>
<tr class="separator:a9b8b938b6bd16edd21d6dc420812f3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bdbab4ce3ea0d092c77d1984687a952"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a3bdbab4ce3ea0d092c77d1984687a952">connectTo</a> (const std::string &amp;conn_string)</td></tr>
<tr class="separator:a3bdbab4ce3ea0d092c77d1984687a952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aede09f1dd99ef9c2cd84c4016e3e82b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#aede09f1dd99ef9c2cd84c4016e3e82b9">getBox</a> ()</td></tr>
<tr class="separator:aede09f1dd99ef9c2cd84c4016e3e82b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c3488a35452d363fcb85873e2faf08c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a2c3488a35452d363fcb85873e2faf08c">ping</a> (int p=1)</td></tr>
<tr class="separator:a2c3488a35452d363fcb85873e2faf08c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7318a5e0f71d2e6e094929e278fdd9a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a7318a5e0f71d2e6e094929e278fdd9a0">accountLogin</a> (const std::string &amp;address, const std::string &amp;password)</td></tr>
<tr class="separator:a7318a5e0f71d2e6e094929e278fdd9a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7961e6233e58f2716d805457a7fe001"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#ad7961e6233e58f2716d805457a7fe001">accountLogin</a> (const <a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp;box)</td></tr>
<tr class="separator:ad7961e6233e58f2716d805457a7fe001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41140cb74495424ac2eb3b723c857e2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a41140cb74495424ac2eb3b723c857e2d">accountRegister</a> (const std::string &amp;address, const std::string &amp;password)</td></tr>
<tr class="separator:a41140cb74495424ac2eb3b723c857e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c753e604044da16136edc7e89b7e45c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a5c753e604044da16136edc7e89b7e45c">accountRegister</a> (const <a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp;box)</td></tr>
<tr class="separator:a5c753e604044da16136edc7e89b7e45c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12dd7ea40b6f48e1b8e27f0063202b50"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a12dd7ea40b6f48e1b8e27f0063202b50">getMessages</a> ()</td></tr>
<tr class="separator:a12dd7ea40b6f48e1b8e27f0063202b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4500664a3817085aa5b1d81bce3d47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a5a4500664a3817085aa5b1d81bce3d47">send</a> (const <a class="el" href="structmail_1_1Message.html">mail::Message</a> &amp;message)</td></tr>
<tr class="separator:a5a4500664a3817085aa5b1d81bce3d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ef946e85679ce8c51c1f27737b2e684"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a1ef946e85679ce8c51c1f27737b2e684">remove</a> (int idx)</td></tr>
<tr class="separator:a1ef946e85679ce8c51c1f27737b2e684"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a11a8aed526a0ccc089cf9292173833e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a11a8aed526a0ccc089cf9292173833e6">fillMailboxMessage</a> (MailboxMessage &amp;dst, const <a class="el" href="structmail_1_1Message.html">mail::Message</a> &amp;src)</td></tr>
<tr class="separator:a11a8aed526a0ccc089cf9292173833e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6b6dc73e86e612248ce224c938676b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#aa6b6dc73e86e612248ce224c938676b5">fillDeleteMessage</a> (DeleteMessage &amp;dst, int idx)</td></tr>
<tr class="separator:aa6b6dc73e86e612248ce224c938676b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cabdd1d086d5a07510cedcba4a2b18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a63cabdd1d086d5a07510cedcba4a2b18">auth</a> (const <a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp;box, bool login=true)</td></tr>
<tr class="separator:a63cabdd1d086d5a07510cedcba4a2b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55d61b35ee61a05c4dd3ecd9e119ff81"><td class="memTemplParams" colspan="2">template&lt;class T , class R &gt; </td></tr>
<tr class="memitem:a55d61b35ee61a05c4dd3ecd9e119ff81"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; grpc::Status, R &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a55d61b35ee61a05c4dd3ecd9e119ff81">sendMessage</a> (const T *request, grpc::Status(chord::NodeService::Stub::*rpc)(grpc_impl::ClientContext *, const T &amp;, R *))</td></tr>
<tr class="separator:a55d61b35ee61a05c4dd3ecd9e119ff81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:aa4beabd84956fb9bf7404643cbe89c89"><td class="memItemLeft" align="right" valign="top">static time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#aa4beabd84956fb9bf7404643cbe89c89">secondsToTimeT</a> (google::protobuf::int64 secs)</td></tr>
<tr class="separator:aa4beabd84956fb9bf7404643cbe89c89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd16d5d1aac06941cd6c8cf8d1cbf435"><td class="memItemLeft" align="right" valign="top">static google::protobuf::int64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#afd16d5d1aac06941cd6c8cf8d1cbf435">timeTToSeconds</a> (time_t time)</td></tr>
<tr class="separator:afd16d5d1aac06941cd6c8cf8d1cbf435"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a70a1aa7e028cbf9fd618cab10a57bdec"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; chord::NodeService::Stub &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a70a1aa7e028cbf9fd618cab10a57bdec">stub_</a></td></tr>
<tr class="separator:a70a1aa7e028cbf9fd618cab10a57bdec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b036083bf31dd31fa27ff5ac7e76db0"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchord_1_1Client.html#a0b036083bf31dd31fa27ff5ac7e76db0">box_</a></td></tr>
<tr class="separator:a0b036083bf31dd31fa27ff5ac7e76db0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the main interface for a client with the chord hash-table.</p>
<p>All of the actions required by a mail client are given here. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7a5838fc7db90ca550069d577819ced6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a5838fc7db90ca550069d577819ced6">&#9670;&nbsp;</a></span>Client() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">chord::Client::Client </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>conn_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a new client from a connection string</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_string</td><td>in the format "address:port" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6cf2551c3e211094d5516b00ff267751"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cf2551c3e211094d5516b00ff267751">&#9670;&nbsp;</a></span>Client() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">chord::Client::Client </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Builds a new client from a node's coordinates.</p>
<p>Is the equivalent of: </p><div class="fragment"><div class="line"><a class="code" href="classchord_1_1Client.html#a7a5838fc7db90ca550069d577819ced6">Client</a>(node.conn_string());</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad7961e6233e58f2716d805457a7fe001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7961e6233e58f2716d805457a7fe001">&#9670;&nbsp;</a></span>accountLogin() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> chord::Client::accountLogin </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp;&#160;</td>
          <td class="paramname"><em>box</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Logs in to an account with the given credentials.</p>
<p>The node will automatically connect to the successor node for the mailbox.</p>
<p>After calling this method it will be possible to interact with the nodes.</p>
<p>Is the equivalent of: </p><div class="fragment"><div class="line">client.accountLogin(box.getOwner(), box.getPassword());</div>
</div><!-- fragment --><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">NodeException</a></td><td>if the account isn't registered or the password is not valid </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">box</td><td>to log into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the successor node for the given mailbox </dd></dl>

</div>
</div>
<a id="a7318a5e0f71d2e6e094929e278fdd9a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7318a5e0f71d2e6e094929e278fdd9a0">&#9670;&nbsp;</a></span>accountLogin() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> chord::Client::accountLogin </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Logs in to an account with the given credentials.</p>
<p>The node will automatically connect to the successor node for the mailbox.</p>
<p>After calling this method it will be possible to interact with the nodes.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">NodeException</a></td><td>if the account isn't registered or the password is not valid </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>mailbox address to login to. </td></tr>
    <tr><td class="paramname">password</td><td>mailbox password to login to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the successor node for the given mailbox </dd></dl>

</div>
</div>
<a id="a5c753e604044da16136edc7e89b7e45c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c753e604044da16136edc7e89b7e45c">&#9670;&nbsp;</a></span>accountRegister() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> chord::Client::accountRegister </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp;&#160;</td>
          <td class="paramname"><em>box</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Registers a new account with the given credentials.</p>
<p>The node will automatically connect to the successor node for the mailbox.</p>
<p>After calling this method it will be possible to interact with the nodes.</p>
<p>Is the equivalent of: </p><div class="fragment"><div class="line">client.accountRegister(box.getOwner(), box.getPassword());</div>
</div><!-- fragment --><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">NodeException</a></td><td>if the account isn't registered or the password is not valid. This normally shouldn't happen but <a class="el" href="classchord_1_1Node.html#a7d327d6571ec145f12755f780bab1f4b">Node::InsertMailbox</a> and <a class="el" href="classchord_1_1Node.html#a13d7ea6bc9ef993ea4d3c93aea5dd43a">Node::Authenticate</a> can throw errors if something unexpected happens so this eventuality is handled </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">box</td><td>to log into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the successor node for the given mailbox </dd></dl>

</div>
</div>
<a id="a41140cb74495424ac2eb3b723c857e2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41140cb74495424ac2eb3b723c857e2d">&#9670;&nbsp;</a></span>accountRegister() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> chord::Client::accountRegister </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Registers a new account with the given credentials.</p>
<p>The node will automatically connect to the successor node for the mailbox.</p>
<p>After calling this method it will be possible to interact with the nodes.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">NodeException</a></td><td>if the account isn't registered or the password is not valid. This normally shouldn't happen but <a class="el" href="classchord_1_1Node.html#a7d327d6571ec145f12755f780bab1f4b">Node::InsertMailbox</a> and <a class="el" href="classchord_1_1Node.html#a13d7ea6bc9ef993ea4d3c93aea5dd43a">Node::Authenticate</a> can throw errors if something unexpected happens so this eventuality is handled </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>mailbox address to login to. </td></tr>
    <tr><td class="paramname">password</td><td>mailbox password to login to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the successor node for the given mailbox </dd></dl>

</div>
</div>
<a id="a63cabdd1d086d5a07510cedcba4a2b18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63cabdd1d086d5a07510cedcba4a2b18">&#9670;&nbsp;</a></span>auth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchord_1_1NodeInfo.html">chord::NodeInfo</a> chord::Client::auth </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp;&#160;</td>
          <td class="paramname"><em>box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>login</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Authentication method.</p>
<p><a class="el" href="classchord_1_1Client.html#a41140cb74495424ac2eb3b723c857e2d">Client::accountRegister</a> and <a class="el" href="classchord_1_1Client.html#a7318a5e0f71d2e6e094929e278fdd9a0">Client::accountLogin</a> will use this method due to their similarity.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">NodeException</a></td><td>if the lookup or the authentication procedure goes wrong. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">box</td><td>box to login/register into </td></tr>
    <tr><td class="paramname">login</td><td>true if the client should attempt a login or false if the box is new and should be added to the system </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9b8b938b6bd16edd21d6dc420812f3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b8b938b6bd16edd21d6dc420812f3d8">&#9670;&nbsp;</a></span>connectTo() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool chord::Client::connectTo </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structchord_1_1NodeInfo.html">NodeInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Connects to a node, the current connection will be dropped.</p>
<p>Is the equivalent of: </p><div class="fragment"><div class="line">client.connectTo(node.conn_string());</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>the new node to connect to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3bdbab4ce3ea0d092c77d1984687a952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bdbab4ce3ea0d092c77d1984687a952">&#9670;&nbsp;</a></span>connectTo() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool chord::Client::connectTo </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>conn_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Connects to a node, the current connection will be dropped.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_string</td><td>in the format "address:port" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa6b6dc73e86e612248ce224c938676b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6b6dc73e86e612248ce224c938676b5">&#9670;&nbsp;</a></span>fillDeleteMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chord::Client::fillDeleteMessage </td>
          <td>(</td>
          <td class="paramtype">DeleteMessage &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fills a chord::DeleteMessage with index passed by parameter.</p>
<p>Authentication data will also be filled by this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>message to fill </td></tr>
    <tr><td class="paramname">idx</td><td>index of the message to delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a11a8aed526a0ccc089cf9292173833e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11a8aed526a0ccc089cf9292173833e6">&#9670;&nbsp;</a></span>fillMailboxMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chord::Client::fillMailboxMessage </td>
          <td>(</td>
          <td class="paramtype">MailboxMessage &amp;&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmail_1_1Message.html">mail::Message</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fill a chord::MailboxMessage from a <a class="el" href="structmail_1_1Message.html">mail::Message</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>chord::MailboxMessage destination reference </td></tr>
    <tr><td class="paramname">src</td><td><a class="el" href="structmail_1_1Message.html">mail::Message</a> source reference </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aede09f1dd99ef9c2cd84c4016e3e82b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aede09f1dd99ef9c2cd84c4016e3e82b9">&#9670;&nbsp;</a></span>getBox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a> &amp; chord::Client::getBox </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the mailbox handled by the client </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">chord::NodeException</a></td><td>if the client is not logged in to any account (via <a class="el" href="classchord_1_1Client.html#a7318a5e0f71d2e6e094929e278fdd9a0">Client::accountLogin</a> or <a class="el" href="classchord_1_1Client.html#a41140cb74495424ac2eb3b723c857e2d">Client::accountRegister</a>); </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a12dd7ea40b6f48e1b8e27f0063202b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12dd7ea40b6f48e1b8e27f0063202b50">&#9670;&nbsp;</a></span>getMessages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool chord::Client::getMessages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the messages from the node.</p>
<p>The messages will be cached inside the box and can be accessed by calling the <a class="el" href="classmail_1_1MailBox.html#afc00cbfbdd21a47a4019b6df7855a4e0">mail::MailBox::getMessages</a> method on the box returned by <a class="el" href="classchord_1_1Client.html#aede09f1dd99ef9c2cd84c4016e3e82b9">Client::getBox</a>.</p>
<p>This method should only be called after <a class="el" href="classchord_1_1Client.html#a7318a5e0f71d2e6e094929e278fdd9a0">Client::accountLogin</a> or <a class="el" href="classchord_1_1Client.html#a41140cb74495424ac2eb3b723c857e2d">Client::accountRegister</a>.</p>
<p>See <a class="el" href="classchord_1_1Node.html#ac29a8f0e1eefac2271d01bf9db98cea0">Node::Receive</a> for more details on the server side.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the mailbox is updated and ready to be read, false otherwise. Normally if the login was successful and the client is still connected to the mailbox's successor this method should always return true. </dd></dl>

</div>
</div>
<a id="a2c3488a35452d363fcb85873e2faf08c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c3488a35452d363fcb85873e2faf08c">&#9670;&nbsp;</a></span>ping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool chord::Client::ping </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a <a class="el" href="classchord_1_1Node.html#a23d0822ece97255b945b6277d9f105c7">Node::Ping</a> message to the connected node. </p>

</div>
</div>
<a id="a1ef946e85679ce8c51c1f27737b2e684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ef946e85679ce8c51c1f27737b2e684">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chord::Client::remove </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes a mail from the mailbox.</p>
<p>See <a class="el" href="classchord_1_1Node.html#aa22e4402812ab7c7df34278d1b0ef8c5">Node::Delete</a> for more details on the server side.</p>
<p>This method should only be called after <a class="el" href="classchord_1_1Client.html#a7318a5e0f71d2e6e094929e278fdd9a0">Client::accountLogin</a> or <a class="el" href="classchord_1_1Client.html#a41140cb74495424ac2eb3b723c857e2d">Client::accountRegister</a>.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">chord::NodeException</a></td><td>if the message was not sent succesfully. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td>index of the message to delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa4beabd84956fb9bf7404643cbe89c89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4beabd84956fb9bf7404643cbe89c89">&#9670;&nbsp;</a></span>secondsToTimeT()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">time_t chord::Client::secondsToTimeT </td>
          <td>(</td>
          <td class="paramtype">google::protobuf::int64&#160;</td>
          <td class="paramname"><em>secs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Convenience method to cast a google::protobuf::int64 to a time_t.</p>
<p>This is used to get data from a chord::MailboxMessage to a <a class="el" href="structmail_1_1Message.html">mail::Message</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">secs</td><td>seconds from epoch </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a time_t equivalent </dd></dl>

</div>
</div>
<a id="a5a4500664a3817085aa5b1d81bce3d47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4500664a3817085aa5b1d81bce3d47">&#9670;&nbsp;</a></span>send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chord::Client::send </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmail_1_1Message.html">mail::Message</a> &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a new mail.</p>
<p>See <a class="el" href="classchord_1_1Node.html#a5fa42d77315481219d34147cfdf56ae0">Node::Send</a> for more details on the server side.</p>
<p>This method should only be called after <a class="el" href="classchord_1_1Client.html#a7318a5e0f71d2e6e094929e278fdd9a0">Client::accountLogin</a> or <a class="el" href="classchord_1_1Client.html#a41140cb74495424ac2eb3b723c857e2d">Client::accountRegister</a>.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="structchord_1_1NodeException.html">chord::NodeException</a></td><td>if the message was not sent succesfully </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>to send </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55d61b35ee61a05c4dd3ecd9e119ff81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55d61b35ee61a05c4dd3ecd9e119ff81">&#9670;&nbsp;</a></span>sendMessage()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T , class R &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;grpc::Status, R&gt; chord::Client::sendMessage </td>
          <td>(</td>
          <td class="paramtype">const T *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">grpc::Status(chord::NodeService::Stub::*)(grpc_impl::ClientContext *, const T &amp;, R *)&#160;</td>
          <td class="paramname"><em>rpc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Shortcut used to send messages to a node.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>request to send to the node </td></tr>
    <tr><td class="paramname">rpc</td><td>function pointer to the method to call on the remote node </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pair composed by the grpc::Status of the call and the reply message sent by the remote node. </dd></dl>

</div>
</div>
<a id="afd16d5d1aac06941cd6c8cf8d1cbf435"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd16d5d1aac06941cd6c8cf8d1cbf435">&#9670;&nbsp;</a></span>timeTToSeconds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">google::protobuf::int64 chord::Client::timeTToSeconds </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Convenience method to cast a time_t to a google::protobuf::int64.</p>
<p>This is used to get data from a <a class="el" href="structmail_1_1Message.html">mail::Message</a> to a chord::MailboxMessage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>seconds from epoch </dd></dl>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="a0b036083bf31dd31fa27ff5ac7e76db0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b036083bf31dd31fa27ff5ac7e76db0">&#9670;&nbsp;</a></span>box_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classmail_1_1MailBox.html">mail::MailBox</a>&gt; chord::Client::box_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mailbox handled by the client </p>

</div>
</div>
<a id="a70a1aa7e028cbf9fd618cab10a57bdec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70a1aa7e028cbf9fd618cab10a57bdec">&#9670;&nbsp;</a></span>stub_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;chord::NodeService::Stub&gt; chord::Client::stub_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stub used to send remote calls </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/romagmir/Projects/chord/include/chord/<a class="el" href="client_8hpp_source.html">client.hpp</a></li>
<li>/home/romagmir/Projects/chord/src/<a class="el" href="client_8cpp.html">client.cpp</a></li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclasschord_1_1Client_html_a7a5838fc7db90ca550069d577819ced6"><div class="ttname"><a href="classchord_1_1Client.html#a7a5838fc7db90ca550069d577819ced6">chord::Client::Client</a></div><div class="ttdeci">Client(const std::string &amp;conn_string)</div><div class="ttdef"><b>Definition:</b> client.cpp:3</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
